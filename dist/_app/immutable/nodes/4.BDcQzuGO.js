import{f as P,a as z}from"../chunks/DqXKHUsY.js";import"../chunks/DybgDApQ.js";import{p as M,j as N,k as T,t as S,g as e,m as W,e as B,n as p,o as v,s as m,q as a,v as b}from"../chunks/DmHJ9QOL.js";import{e as k,s as q}from"../chunks/CaJ6HOFi.js";import{i as E}from"../chunks/CcfVls_4.js";import{b as I,r as D,p as F}from"../chunks/Cl-7jzWS.js";import{i as G}from"../chunks/DPdeReKP.js";import{p as H}from"../chunks/COVjswXf.js";import{i as J,g as K}from"../chunks/BDw5y_s8.js";var O=P('<p class="error svelte-1x05zx6"> </p>'),Q=P('<main class="svelte-1x05zx6"><h2 class="svelte-1x05zx6">Pager System</h2> <form><input type="email" placeholder="you@example.com" required class="svelte-1x05zx6"/> <input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required class="svelte-1x05zx6"/> <button type="submit" class="svelte-1x05zx6"> </button> <button type="button" class="svelte-1x05zx6">Create New Account</button></form> <!></main>');function ie(U,_){M(_,!1);const o=p(),h=p();let w=H(_,"data",8),t=p(""),n=p(""),l=p(""),i=p(!1);async function C(){a(i,!0),a(l,"");const{error:s,data:r}=await e(o).auth.signUp({email:e(t),password:e(n),options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(s)a(l,s.message);else{const{data:u}=await e(o).from("users").select("id").eq("id",r.user.id).single();u||await e(o).from("users").insert({id:r.user.id,username:e(t).split("@")[0],email:e(t)}),alert("ðŸŽ‰ Signâ€‘up successful! Check your email."),a(t,""),a(n,"")}a(i,!1)}async function R(){a(i,!0),a(l,"");const{error:s,data:r}=await e(o).auth.signInWithPassword({email:e(t),password:e(n)});if(s)a(l,s.message),a(n,"");else{const{data:u}=await e(o).from("users").select("id").eq("id",r.user.id).single();u||await e(o).from("users").insert({id:r.user.id,username:e(t).split("@")[0],email:e(t)}),await J("supabase:auth"),console.log("Sign In successful. Redirecting..."),K("/pager")}a(i,!1)}N(()=>(e(o),e(h),B(w())),()=>{(s=>{a(o,s.supabase),a(h,s.session)})(w())}),T(),G();var x=Q(),c=m(v(x),2),d=v(c);D(d);var f=m(d,2);D(f);var g=m(f,2),j=v(g,!0);b(g);var y=m(g,2);b(c);var A=m(c,2);{var L=s=>{var r=O(),u=v(r,!0);b(r),S(()=>q(u,e(l))),z(s,r)};E(A,s=>{e(l)&&s(L)})}b(x),S(()=>{d.disabled=e(i),f.disabled=e(i),g.disabled=e(i),q(j,e(i)?"Processingâ€¦":"Sign In"),y.disabled=e(i)}),I(d,()=>e(t),s=>a(t,s)),I(f,()=>e(n),s=>a(n,s)),k("click",y,C),k("submit",c,F(R)),z(U,x),W()}export{ie as component};
